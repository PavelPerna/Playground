<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posran√° Otrock√° Hra</title>
    <link href="styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <div id="sidebar">
            <div id="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</div>
            <div class="menu-item" onclick="showSection('characters')" data-section="characters">üë§ Postavy</div>
            <div class="menu-item" onclick="showSection('stories')" data-section="stories">üìú P≈ô√≠bƒõhy</div>
            <div class="menu-item" onclick="showSection('locations')" data-section="locations">üìç Lokace</div>
            <div class="menu-item" onclick="showSection('system')" data-section="system">‚öôÔ∏è Syst√©m</div>
            <div id="sidebar-content">
                <div id="characters-section" class="section-content">
                    <h2>Spr√°va Postav</h2>
                    <div id="character-list-display">
                        <h3>Existuj√≠c√≠ Postavy</h3>
                        <div id="character-list"></div>
                    </div>

                    <button onclick="startCharacterWizard()" class="add-button">P≈ôidat Novou Postavu</button>

                    <div id="character-wizard" class="wizard-container" style="display: none;">
                        <h3>Pr≈Øvodce Postavou</h3>

                        <div id="char-step-1" class="wizard-step">
                            <h4>Krok 1: Z√°kladn√≠ informace</h4>
                            <label for="char-name">Jm√©no:</label>
                            <input type="text" id="char-name" placeholder="Jm√©no postavy"><br>

                            <label for="char-race">Rasa:</label>
                            <input type="text" id="char-race" placeholder="Lidsk√°, Elf, Trpasl√≠k..."><br>

                            <label for="char-appearance">Vzhled:</label>
                            <textarea id="char-appearance" placeholder="Popi≈° vzhled postavy..."></textarea><br>
                            <button onclick="nextCharacterWizardStep()">Dal≈°√≠</button>
                            <button onclick="resetCharacterWizard()">Zru≈°it</button>
                        </div>

                        <div id="char-step-2" class="wizard-step" style="display: none;">
                            <h4>Krok 2: Osobnost a sexualita</h4>
                            <label for="char-personality">Osobnost:</label>
                            <textarea id="char-personality" placeholder="Popi≈° osobnostn√≠ rysy..."></textarea><br>
                            <label for="char-sexuality">Sexualita:</label>
                            <input type="text" id="char-sexuality" placeholder="Hetero, Gay, Bi, Nezad√°no..."><br>
                            <button onclick="prevCharacterWizardStep()">Zpƒõt</button>
                            <button onclick="nextCharacterWizardStep()">Dal≈°√≠</button>
                        </div>

                        <div id="char-step-3" class="wizard-step" style="display: none;">
                            <h4>Krok 3: Atributy a dovednosti</h4>
                            <label for="char-attributes">Atributy (JSON form√°t):</label>
                            <textarea id="char-attributes" placeholder='{"s√≠la": 10, "obratnost": 8}'></textarea><br>
                            <label for="char-skills">Dovednosti (oddƒõlen√© ƒç√°rkou):</label>
                            <input type="text" id="char-skills" placeholder="boj, ≈°pion√°≈æ, diplomacie"><br>
                            <button onclick="prevCharacterWizardStep()">Zpƒõt</button>
                            <button onclick="saveCharacterFromWizard()">Ulo≈æit Postavu</button>
                        </div>
                    </div>
                </div>

                <div id="stories-section" class="section-content" style="display: none;">
                    <h2>Spr√°va P≈ô√≠bƒõh≈Ø</h2>
                    <div id="story-list-display">
                        <h3>Existuj√≠c√≠ P≈ô√≠bƒõhy (Akce)</h3>
                        <div id="story-list"></div>
                    </div>

                    <button onclick="startStoryWizard()" class="add-button">P≈ôidat Nov√Ω P≈ô√≠bƒõh</button>

                    <div id="story-wizard" class="wizard-container" style="display: none;">
                        <h3>Pr≈Øvodce P≈ô√≠bƒõhem</h3>
                        <div id="story-step-1" class="wizard-step">
                            <h4>Krok 1: Akce a Odpovƒõƒè</h4>
                            <input type="text" id="story-action" placeholder="Akce (nap≈ô. 'l√≠znout boty')">
                            <textarea id="story-response" placeholder="Co vypravƒõƒç ≈ôekne..."></textarea>
                            <button onclick="nextStoryWizardStep()">Dal≈°√≠</button>
                        </div>
                        <div id="story-step-2" class="wizard-step" style="display: none;">
                            <h4>Krok 2: Lokace a Postavy</h4>
                            <input type="text" id="story-location" placeholder="N√°zev lokace (mus√≠ existovat)">
                            <textarea id="story-characters" placeholder="Jm√©na postav (ƒç√°rkami oddƒõlen√©, mus√≠ existovat)"></textarea>
                            <button onclick="prevStoryWizardStep()">Zpƒõt</button>
                            <button onclick="nextStoryWizardStep()">Dal≈°√≠</button>
                        </div>
                        <div id="story-step-3" class="wizard-step" style="display: none;">
                            <h4>Krok 3: Historick√Ω Kontext a C√≠l</h4>
                            <textarea id="story-history-context" placeholder="Relevantn√≠ historick√Ω kontext (ƒç√°rkami oddƒõlen√© ud√°losti)"></textarea>
                            <textarea id="story-goal" placeholder="C√≠l tohoto p≈ô√≠bƒõhov√©ho segmentu"></textarea>
                            <button onclick="prevStoryWizardStep()">Zpƒõt</button>
                            <button onclick="saveStoryFromWizard()">Ulo≈æit P≈ô√≠bƒõh</button>
                        </div>
                        <input type="hidden" id="story-key"> </div>
                </div>

                <div id="locations-section" class="section-content" style="display: none;">
                    <h2>Spr√°va Lokac√≠</h2>
                    <div id="location-list-display">
                        <h3>Existuj√≠c√≠ Lokace</h3>
                        <div id="location-list"></div>
                    </div>

                    <button onclick="startLocationWizard()" class="add-button">P≈ôidat Novou Lokaci</button>

                    <div id="location-wizard" class="wizard-container" style="display: none;">
                        <h3>Pr≈Øvodce Lokac√≠</h3>
                        <div id="loc-step-1" class="wizard-step">
                            <h4>Krok 1: N√°zev Lokace</h4>
                            <input type="text" id="loc-name" placeholder="N√°zev lokace">
                            <button onclick="nextLocationWizardStep()">Dal≈°√≠</button>
                        </div>
                        <div id="loc-step-2" class="wizard-step" style="display: none;">
                            <h4>Krok 2: Popis Lokace</h4>
                            <textarea id="loc-desc" placeholder="Popis lokace"></textarea>
                            <button onclick="prevLocationWizardStep()">Zpƒõt</button>
                            <button onclick="saveLocationFromWizard()">Ulo≈æit Lokaci</button>
                        </div>
                    </div>
                </div>

                <div id="system-section" class="section-content">
                    <h2>Nastaven√≠ vypravƒõƒçe</h2>
                    <label for="narrator-tone">T√≥n vypravƒõƒçe:</label>
                    <select id="narrator-tone">
                        <option value="extreme">Extr√©mnƒõ sprost√Ω</option>
                        <option value="mocking">Posmƒõ≈°n√Ω</option>
                        <option value="dominant">Dominantn√≠</option>
                    </select>
                    <label for="narrator-instructions">Instrukce pro vypravƒõƒçe:</label>
                    <textarea id="narrator-instructions" placeholder="Instrukce pro vypravƒõƒçe"></textarea>
                    <button onclick="saveSystemSettings()">Ulo≈æit Nastaven√≠ Vypravƒõƒçe</button>

                    <h3 style="margin-top: 20px;">Text-to-Speech (TTS) Nastaven√≠</h3>
                    <div class="setting-item">
                        <label for="tts-enabled">Povolit TTS:</label>
                        <input type="checkbox" id="tts-enabled" onchange="saveSystemSettings()">
                    </div>
                    <div class="setting-item">
                        <label for="tts-voice">Hlas:</label>
                        <select id="tts-voice" onchange="saveSystemSettings()">
                            </select>
                    </div>
                    <div class="setting-item">
                        <label for="tts-pitch">V√Ω≈°ka hlasu:</label>
                        <input type="range" id="tts-pitch" min="0.1" max="2" value="1" step="0.1" oninput="document.getElementById('tts-pitch-value').innerText = this.value" onchange="saveSystemSettings()">
                        <span id="tts-pitch-value">1.0</span>
                    </div>
                    <div class="setting-item">
                        <label for="tts-rate">Rychlost:</label>
                        <input type="range" id="tts-rate" min="0.1" max="10" value="1" step="0.1" oninput="document.getElementById('tts-rate-value').innerText = this.value" onchange="saveSystemSettings()">
                        <span id="tts-rate-value">1.0</span>
                    </div>
                    <button onclick="testTtsVoice()" class="add-button" id="test-tts-button">Test Hlasu</button>


                    <h3 style="margin-top: 20px;">Spr√°va Dat Hry</h3>
                    <button onclick="exportGameData()" class="add-button">Exportovat data hry</button>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                    <button onclick="document.getElementById('importFileInput').click()" class="add-button">Importovat data hry</button>
                    <button onclick="startGame()" class="add-button" style="background: #2196F3 !important; border-color: #2196F3 !important;">Spustit Novou Hru</button>
                </div>
            </div>
        </div>
        <div id="main-game">
            <h1>Posran√° Otrock√° Hra</h1>
            <div id="history"></div>
            <p id="scene">Naƒç√≠t√°m sc√©nu...</p>
            <div id="choices">
                </div>
            <div>
                <input type="text" id="text-input" placeholder="Zadej akci, ty dƒõvko...">
                <button id="submit-text" onclick="customAction()">Udƒõlat</button>
            </div>
            <div id="error-message"></div>
        </div>
        <div id="right-panel">
            <div id="player-stats-section" class="panel-section">
                <h2>Hr√°ƒçovy Statistiky</h2>
                <div id="player-stats-content">
                    <p>Jm√©no: Otrok</p>
                    <p>Zdrav√≠: 100/100</p>
                    <p>Pon√≠≈æen√≠: 50%</p>
                    <p>Poslu≈°nost: 80%</p>
                    </div>
            </div>
            <div id="inventory-section" class="panel-section">
                <h2>Invent√°≈ô</h2>
                <div id="inventory">Invent√°≈ô: Pr√°zdn√Ω</div>
            </div>
        </div>
    </div>
    <script src="game.js"></script>
</body>
</html>